TODO: Model a state machine diagram